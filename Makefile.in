# Copyright (C) 2009  Internet Systems Consortium, Inc. ("ISC")
#
# Permission to use, copy, modify, and/or distribute this software for any
# purpose with or without fee is hereby granted, provided that the above
# copyright notice and this permission notice appear in all copies.
#
# THE SOFTWARE IS PROVIDED "AS IS" AND ISC DISCLAIMS ALL WARRANTIES WITH
# REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
# AND FITNESS.  IN NO EVENT SHALL ISC BE LIABLE FOR ANY SPECIAL, DIRECT,
# INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
# LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE
# OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
# PERFORMANCE OF THIS SOFTWARE.

# $Id$

CFLAGS = @CFLAGS@ -Wall -Werror
LDFLAGS = @LDFLAGS@

all:	config_manager config_module.o example_module data.o

config_manager:	config_manager.cc config_obj.o
	$(CXX) $(CFLAGS) $(LDFLAGS) -lxerces-c -o config_manager \
	config_obj.o config_manager.cc

config_obj.o:	config_obj.cc config_obj.hh
	$(CXX) $(CFLAGS) -c -o config_obj.o config_obj.cc

config_module.o:	config_obj.o config_module.cc config_module.hh
	$(CXX) $(CFLAGS) -c -o config_module.o config_module.cc

data.o:	data.cc data.h
	#$(CXX) $(CFLAGS) -c -o data.o data.cc
	$(CXX) $(CFLAGS) -o test data.cc

example_module:	config_module.o example_module.hh example_module.cc
	$(CXX) $(CFLAGS) -o example_module -l xerces-c config_module.o config_obj.o example_module.cc

clean:
	rm -f config_manager *.o myconf_new.conf

run:
	./config_manager
